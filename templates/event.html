{% extends 'base.html' %}
{% block content %}
      <main class="container-fluid main-content position-relative max-height-vh-100 h-100 rounded ">
        <div class="container-fluid py-4">
          <div class="row">
            <div class="col-lg-7">
              <div class="row">
                <div class="col-xl-7 mb-xl-0 mb-4">
                  <div class="d-flex card bg-transparent ">
                    <div style="padding: 150px;" class="overflow-hidden position-relative rounded " >
                      <img height="300"  src="{{event.get_image_url}}" class="position-absolute opacity-2 start-0 top-0 w-100 z-index-1" alt="{{event.event_title}}">
                      <span class=""></span>
                    </div>
                    <div class=" mb-1">
                      <div class="card mt-4">
                        <div class="card-header pb-0 p-3">
                            <div class="align-items-center mb-3">
                              <h6 class="mb-0">Partners and Sponsors</h6>
                          </div>
                        </div>
                        {% for partner in partners %}
                        <div class="card-body p-3">
                          <div class="mb-md-0 mb-4">
                            <div class="card card-body rounded d-flex align-items-center flex-row">
                              <img width="75" class="w-10 me-3 mb-0" src="{{partner.get_logo_url}}" alt="logo">
                              <h6 class="mb-0">{{partner.name}}</h6>
                          </div>
                        </div>
                      </div>
                        {% endfor %}   
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-xl-5">
                      <div class="card h-100">
                        <div class="card-header pb-0 p-3">
                            <div class="mb-3 align-items-center">
                              <h6 class="mb-0">Speakers</h6>
                            </div>
                        </div>
                        {% for speaker in speakers %}
                          <div class="card-body p-2 pb-0">
                            <ul class="list-group">
                              <li class="list-group-item border-0 d-flex justify-content-between ps-0 rounded">
                                <div class="d-flex align-items-center pl-5 pt-2">
                                  <span  class="pt-1 align-items-center rounded"><img width="46" class="pt-1 rounded " src="{{speaker.get_image_url}}" alt="avatar">&nbsp;&nbsp;&nbsp;</span>
                                  <span class="text-mb-1 font-weight-bold text-sm">{{speaker.first_name}} {{speaker.last_name}}</span>
                                </div>
                                <div class="d-flex align-items-center text-sm">
                                  <span class="mr-3">{{speaker.title}} - {{speaker.company}}</span>
                                </div>
                              </li>
                            </ul>
                          </div>
                        {% endfor %}
                      </div>
                  </div>
                
              </div>
              <div class=" mt-0">
                <div class="py-4">
                  <div class="row">
                      <div class="col-12">
                      <div class="card my-4">
                          <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
                          <div class="bg-success rounded pt-4 pb-3">
                              <h6 class=" text-capitalize text-white ps-3">Attendees</h6>
                          </div>
                          </div>
                          <div class="card-body px-0 pb-2">
                          <div class="table-responsive p-0">
                              <table class="table align-items-center mb-0">
                              <thead>
                                  <tr>
                                  <th class="text-uppercase text-secondary  font-weight-bolder ">Avatar</th>
                                  <th class="text-uppercase text-secondary font-weight-bolder  ps-2">Name</th>
                                  <th class="text-center text-uppercase text-secondary font-weight-bolder ">User Type</th>
                                  <th class="text-center text-uppercase text-secondary font-weight-bolder ">Attending</th>
                                  <th class="text-secondary "></th>
                                  </tr>
                              </thead>
                              <tbody>
                                  
                                  {% for attendee in attendees %}
                                  <tr>
                                    <td>
                                        <div class="d-flex px-2 py-2">
                                        <div>
                                            <img width="65" src="{{attendee.attendee.get_avatar_url}}" class="avatar avatar-sm me-3 rounded" alt="{{attendee.attendee.name}}">
                                        </div>
                                        </div>
                                    </td>
                                    <td class="align-middle text-sm">
                                        <p class="align-middle text-xs font-weight-bold mb-0">{{attendee.attendee.first_name}} {{attendee.attendee.last_name}}</p>
                                    </td>
                                    <td class="align-middle text-center text-sm">
                                      <span class="text-secondary text-xs font-weight-bold">{{attendee.attendee.user_type}}</span>
                                    </td>
                                    <td class="form-switch align-middle text-center">
                                      {% if attendee.attending %}
                                      <input class="form-check-input" type="checkbox" id="attending"  disabled="disabled" checked>
                                      {% else %}
                                      <input class="form-check-input" type="checkbox" id="attending" value="false" disabled="disabled" checked>
                                      {% endif %}
                                    </td>
                                    </tr>
                                  {% endfor %}
                                    
                              </tbody>
                              </table>
                          </div>
                          </div>
                      </div>
                      </div>
                  </div>
                  </div>
              </div>
            </div>
            <div class="col-lg-5">
              <div class="row">
              <div class="card">
                <div class="card-header mx-1 p-3 ">
                  <div class="  rounded">
                    <i class="">Event Details&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;event type:&nbsp;</i>
                    {% if event.event_type == 'physical' %}
                      <span class="badge badge-sm bg-secondary">{{event.event_type}}</span>
                      {% elif  event.event_type == 'online'%}
                      <span class="badge badge-sm bg-success">{{event.event_type}}</span>
                      {% elif  event.event_type == 'hybrid'%}
                      <span class="badge badge-sm bg-primary">{{event.event_type}}</span>
                    {% endif %}
                    {% if event.status == 'disabled' %}
                      <span class="badge badge-sm bg-secondary">{{event.status}}</span>
                      {% elif  event.status == 'active'%}
                      <span class="badge badge-sm bg-success">{{event.status}}</span>
                      {% elif  event.status == 'deleted'%}
                      <span class="badge badge-sm bg-danger">{{event.status}}</span>
                      {% elif  event.status == 'blocked'%}
                      <span class="badge badge-sm bg-info">{{event.status}}</span>
                      {% elif  event.status == 'completed'%}
                      <span class="badge badge-sm bg-danger">{{event.status}}</span>
                    {% endif %}
                  </div>
                </div>
                <div class="card-body pt-3 p-3 ">
                  {% if event.end_date != event.start_date %}
                  <h5 class=" mb-0">{{event.start_date}} - {{event.end_date}}</h5>
                  {% else %}
                  <h5 class=" mb-0">{{event.start_date}}</h5>
                  {% endif %}
                  <span class="text-xs"><b>Time: </b>{{event.start_time}} - {{event.end_time}}</span>
                  <hr class="horizontal  my-3">
                  <h5 class="mb-0"></h5>
                  <h6 class=" mb-0">Event Descritption</h6>
                  <span class="text-xs">{{event.description}}</span>
                  <hr class="horizontal my-3">
                  {% if event.target_audience == 'student' %}
                  <h6 class="mb-0">Target audience: Students</h6>
                  {% elif event.target_audience == 'lecturer' %}
                  <h6 class="mb-0">Target audience: Lecturers</h6>
                  {% elif event.target_audience == 'student' %}
                  <h6 class="mb-0">Target audience: Staff</h6>
                  {%else%}
                  <h6 class="mb-0">Target audience: all</h6>
                  {% endif %}
                  <hr>
                </div>
                
                {% if event.status != 'active' %}
                  <div>
                    <p class=" pt-0 p-3 text-danger">Sorry, you cannot register for this event!</p>
                  </div>
                  {%else%}
                    <form role="form" method='post' class="text-start">
                      {% csrf_token %}
                      <div class=" my-3">
                        <label for="attending" class="form-label">Will you be attending?&nbsp;&nbsp;</label>
                        {{form.attending}}
                      </div>
                      <div class="text-center">
                        <button value="submit" type="submit" class="btn btn-outline-danger w-100 my-4 mb-2">Confirm</button>
                      </div>
                    </form>
                {% endif %}
                </div>
                <div class="mt-5">
                  <a class=" text-center me-2 active py-3 mx-5 my-3 btn btn-outline-danger" aria-current="page" href="{% url 'ems:home' %}">
                    <i class="fa fa-arrow-left fw-bolder opacity-6 text-light me-1"></i>
                    Back to Dashboard
                  </a>
                </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
{% endblock content %}